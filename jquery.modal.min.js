/*
    A simple jQuery modal (http://github.com/kylefox/jquery-modal)
    Version 0.2.3
*/
(function(){var a=null;$.fn.modal=function(f){var e=$(this);if(e.attr("href")){e.click(b);return}f=$.extend({},$.fn.modal.defaults,f);function g(){a.blocker=$('<div class="jquery-modal blocker"></div>').css({top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",position:"fixed",zIndex:f.zIndex,background:f.overlay,opacity:f.opacity});if(f.escapeClose){$(document).keydown(function(h){if(h.which==27){$.fn.modal.close()}})}if(f.clickClose){a.blocker.click($.fn.modal.close)}$("body").append(a.blocker);e.trigger($.fn.modal.BLOCK,[a])}function d(){c(a);if(f.showClose){a.closeButton=$('<a href="#close-modal" rel="modal:close" class="close-modal">Close</a>');a.elm.append(a.closeButton)}e.addClass(f.modalClass).addClass("current").show();e.trigger($.fn.modal.OPEN,[a])}a={elm:e,options:f};e.trigger($.fn.modal.BEFORE_BLOCK,[a]);g();e.trigger($.fn.modal.BEFORE_OPEN,[a]);d()};$.fn.modal.defaults={overlay:"#000",opacity:0.75,zIndex:1,escapeClose:true,clickClose:true,modalClass:"modal",showClose:true};$.fn.modal.BEFORE_BLOCK="modal:before-block";$.fn.modal.BLOCK="modal:block";$.fn.modal.BEFORE_OPEN="modal:before-open";$.fn.modal.OPEN="modal:open";$.fn.modal.BEFORE_CLOSE="modal:before-close";$.fn.modal.CLOSE="modal:close";$.fn.modal.close=function(d){if(d){d.preventDefault()}if(!a){return}a.elm.trigger($.fn.modal.BEFORE_CLOSE,[a]);if(a.closeButton){a.closeButton.remove()}a.blocker.remove();a.elm.hide();a.elm.trigger($.fn.modal.CLOSE,[a]);a=null};$.fn.modal.resize=function(){c(a)};function b(d){d.preventDefault();var e=$(this).attr("href");if(e.match(/^#/)){$(e).modal()}else{$.get(e,{},function(f){$(f).appendTo("body").bind("modal:close",function(h,g){g.elm.remove()}).modal()})}}function c(d){d.elm.css({position:"fixed",top:"50%",left:"50%",marginTop:-(d.elm.outerHeight()/2),marginLeft:-(d.elm.outerWidth()/2),zIndex:d.options.zIndex+1})}$('a[rel="modal:open"]').live("click",b);$('a[rel="modal:close"]').live("click",$.fn.modal.close)})();